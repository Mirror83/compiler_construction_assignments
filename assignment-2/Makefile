BUILD_DIR:=build

all: counter plus_and_minus

counter: counter_parser.yacc counter_lexer.l
	bison --defines=${BUILD_DIR}/token.h --output=${BUILD_DIR}/counter_parser.c counter_parser.yacc
	lex -o ${BUILD_DIR}/counter_scanner.c counter_lexer.l
	gcc ${BUILD_DIR}/counter_scanner.c ${BUILD_DIR}/counter_parser.c -o ${BUILD_DIR}/counter

	# Remove files generated by build process
	rm ${BUILD_DIR}/counter_parser.c ${BUILD_DIR}/counter_scanner.c ${BUILD_DIR}/token.h 

plus_and_minus: arithmetic_parser.yacc arithmetic_lexer.l
	bison --defines=${BUILD_DIR}/token.h --output=${BUILD_DIR}/arithmetic_parser.c arithmetic_parser.yacc
	lex -o ${BUILD_DIR}/arithmetic_scanner.c arithmetic_lexer.l
	gcc ${BUILD_DIR}/arithmetic_scanner.c ${BUILD_DIR}/arithmetic_parser.c -o ${BUILD_DIR}/arithmetic

	# Remove files generated by build process
	rm ${BUILD_DIR}/arithmetic_parser.c ${BUILD_DIR}/arithmetic_scanner.c ${BUILD_DIR}/token.h 
